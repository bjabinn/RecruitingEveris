@using RecruitingWeb.Properties

@model Recruiting.Application.Candidatos.ViewModels.CreateEditCandidatoViewModel

@{
    var Activo = Model.Activo;
    if (Activo == false)
    {
        Response.Redirect("/Shared/Borrado");
    }

}
<div class="row titlePage">
    <div class="col-lg-6">
        <h3>@Resources.HTML_Candidatos_Edit_EditandoCandidato</h3>
    </div>
</div>
<div class="row header-flap">
    <div class="btn-group" role="group">
        <a href="@Url.Action("Volver", "Candidatos")" class="btn btn-default">
            <span class="text">@Resources.HTML_BotonGenericoVolver</span>
        </a>
        <a href="#" data-action="finalizar" class="btn btn-default" style="float:right;margin-bottom:10px;">
            <span class="text">@Resources.HTML_BotonGenericoFinalizar</span>
        </a>
    </div>
    <div class="col-lg-6 removePadding">
        <h4 class="noMargin headerBox">@Resources.HTML_Candidatos_Edit_DatosCandidato</h4>
    </div>
</div>

<div class="row">
    <div class="content-box border-top-cero">
        <div class="content-box-content" id="form-filter">
            <!-- Start form-filter  -->
            @using (Html.BeginForm("Create", "Candidatos", FormMethod.Post, new Dictionary<string, object> { { "role", "form" }, { "data-parsley-validate", "true" }, { "data-parsley-excluded", ":not([data-validate]) , [disabled]" } }))
            {
                @Edit.Hidden("guardar", "SubmitType")
                @Edit.Hidden(Model.CandidatoId, "CandidatoId")

                <div class="section-form-basicos-candidato margin" data-id="section-form-basicos">
                    <div class="row form-row">
                        <div class="form-group col-lg-4">
                            <div class="col-lg-12 title-form">
                                <label for="Nombres">@Resources.HTML_Candidatos_Edit_Nombre</label>
                            </div>
                            <div class="col-lg-12">
                                @Edit.Text(Model.Nombres, "Nombres", id: "Nombres", maxLength: 100, htmlClass: "form-control")
                            </div>
                        </div>
                        <div class="form-group col-lg-4">
                            <div class="col-lg-12 title-form">
                                <label for="apellidos">@Resources.HTML_Candidatos_Edit_Apellidos</label>
                            </div>
                            <div class="col-lg-12">
                                @Edit.Text(Model.Apellidos, "Apellidos", id: "apellidos", htmlClass: "form-control")
                            </div>
                        </div>
                        <div class="form-group col-lg-4">
                            <div class="col-lg-12 title-form">
                                <label for="fechaNacimiento">@Resources.HTML_Candidatos_Edit_FechaNacimiento</label>
                            </div>
                            <div class="col-lg-12">
                                @Edit.Date(Model.FechaNacimiento, "FechaNacimiento", id: "fechaNacimiento", htmlClass: "form-control", required: false)
                            </div>
                        </div>
                    </div>
                    <div class="row form-row">
                        <div class="form-group col-lg-4">
                            <div class="col-lg-12 title-form">
                                <label for="tipoIdentificacion">@Resources.HTML_Candidatos_Edit_TipoIdentificacion</label>
                            </div>
                            <div class="col-lg-12">
                                @Edit.DropDownExtend(Model.TipoIdentificacionId, "TipoIdentificacionId", Model.TipoIdentificacionList, true, false, "form-control", showEmptyOption: true, id: "TipoIdentificacion", required: false)
                            </div>
                        </div>
                        <div class="form-group col-lg-4">
                            <div class="col-lg-12 title-form">
                                <label for="numIdentificacion">@Resources.HTML_Candidatos_Edit_NumeroIdentificacion</label>
                            </div>
                            <div class="col-lg-12">
                                @Edit.Text(Model.NumeroIdentificacion, "NumeroIdentificacion", id: "numIdentificacion", htmlClass: "form-control", required: false)
                            </div>
                        </div>
                        <div class="form-group col-lg-4">
                            <div class="col-lg-12 title-form">
                                <label for="titulacion">@Resources.HTML_Candidatos_Edit_Titulacion</label>
                            </div>
                            <div class="col-lg-12">
                                @Edit.DropDownExtend(Model.TitulacionId, "TitulacionId", Model.TitulacionList, true, false, "form-control", showEmptyOption: true, id: "Titulacion")
                            </div>
                        </div>
                        </div>
                        <div class="form-group col-lg-4">
                            <div class="col-lg-12 title-form">
                                <label>@Resources.HTML_Candidatos_Edit_Centro</label>
                            </div>
                            <div class="col-lg-12">
                                <span class="spanSearch">
                                    <button id="btnCentroSearch" class="btn btnSearch" type="button" data-toggle="modal" data-target="#modalCentros">@Display.GlyphiconButton("glyphicon-search")</button>
                                </span>
                                @Edit.Hidden(Model.CandidatoCentroEducativoId, Model.Access + "CandidatoCentroEducativoId", new Dictionary<string, string> { { "id", "CandidatoCentroEducativoId" } })
                                @Edit.Text(Model.NombreCentroEducativo, name: Model.Access + "NombreCentroEducativo", required: false, id: "NombreCentroEducativo", htmlClass: "form-control inputSearch", isReadOnly: true)
                            </div>
                        </div>
                        <div class="form-group col-lg-4">
                            <div class="col-lg-12 title-form">
                                <label for="Nombres">@Resources.HTML_Candidatos_Edit_AnioEgresado</label>
                            </div>
                            <div class="col-lg-12">
                                @Edit.Text(Model.AnioRegresado, "AnioRegresado", id: "AnioRegresado", maxLength: 100, htmlClass: "form-control", required: false)
                            </div>
                        </div>
                    <div class="row form-row">
                        <div class="form-group col-lg-8">
                            <div class="col-lg-12 title-form">
                                <label for="detTitulacion">@Resources.HTML_Candidatos_Edit_DetalleTitulacion</label>
                            </div>
                            <div class="col-lg-12">
                                @Edit.TextArea(Model.DetalleTitulacion, "DetalleTitulacion", id: "detTitulacion", rows: 4, required: false, htmlClass: "form-control", placeholder: "Detalle...")
                            </div>
                        </div>
                        <div class="form-group col-lg-4">
                            <div class="col-lg-12 title-form">
                            </div>
                            <div class="col-lg-12">
                            </div>
                        </div>
                    </div>
                    <div class="row form-row">

                        <div class="form-group col-lg-8">
                            <div class="col-lg-12 title-form">
                                <label for="detTitulacion">@Resources.HTML_Candidatos_Edit_Direccion</label>
                            </div>
                            <div class="col-lg-12">
                                @Edit.TextArea(Model.Direccion, "Direccion", id: "Direccion", rows: 4, required: false, htmlClass: "form-control", placeholder: "Detalle...")
                            </div>
                        </div>
                        <div class="form-group col-lg-4">
                            <div class="col-lg-12 title-form">
                            </div>
                            <div class="col-lg-12">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-lg-4">
                            <div class="row" style="margin-top:15px;margin-bottom:5px;">
                                <div class="col-lg-12">
                                    <div class="col-lg-8 title-form removePadding">
                                        <label>@Resources.HTML_Candidatos_Create_DatosContacto</label>
                                    </div>
                                    <div class="col-lg-4 removePadding" style="text-align:right;">
                                        <button type="button" class="btn btn-default" id="btncreateContactos">
                                            <span class="text">@Resources.HTML_BotonGenerico_Aniadir</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="row form-row">
                                <div class="col-lg-12">
                                    <table id="listSubmitContact" data-id="listSubmit">
                                        <thead>
                                            <tr role="row">
                                                <th>@Resources.HTML_Candidatos_Edit_TipoContactoHeader</th>
                                                <th>@Resources.HTML_Candidatos_Edit_ContactoHeader</th>
                                                <th></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr role="row" class="hidden" id="templateContactos">
                                                <td class="hidden">@Edit.Hidden(0, "ContactCandidatoViewModel[{0}].CandidatoId")</td>
                                                <td class="hidden">@Edit.Hidden(0, "ContactCandidatoViewModel[{0}].CandidatoContactoId")</td>
                                                <td>@Edit.DropDownExtend((String)null, "ContactCandidatoViewModel[{0}].TipoMedioContactoId", Model.TipoContactoList, htmlClass: "form-control", showEmptyOption: true, required: true, disabled: true)</td>
                                                <td>@Edit.Text((String)null, "ContactCandidatoViewModel[{0}].ValorContacto", htmlClass: "form-control", required: false, disabled: true)</td>
                                                <td>
                                                    <a id="btnDelete"> @Display.GlyphiconButton("glyphicon-trash icon action")</a>
                                                </td>
                                            </tr>

                                            @{
                                                for (int x = 0; x < Model.ContactCandidatoViewModel.Count; x++)
                                                {
                                                    var candId = "ContactCandidatoViewModel[{0}].CandidatoId";
                                                    var nameId = "ContactCandidatoViewModel[{0}].CandidatoContactoId";
                                                    var nameMed = "ContactCandidatoViewModel[{0}].TipoMedioContactoId";
                                                    var nameValor = "ContactCandidatoViewModel[{0}].ValorContacto";

                                            <tr role="row" class="odd">
                                                <td class="hidden">@Edit.Hidden(@Model.ContactCandidatoViewModel[x].CandidatoId, candId)</td>
                                                <td class="hidden">@Edit.Hidden(@Model.ContactCandidatoViewModel[x].CandidatoContactoId, nameId)</td>
                                                <td class="hidden">@Edit.Hidden(@Model.ContactCandidatoViewModel[x].TipoMedioContactoId, nameMed) @Model.ContactCandidatoViewModel[x].TipoMedioContactoId</td>
                                                <td>@Display.DropDownExtend(Model.ContactCandidatoViewModel[x].TipoMedioContactoId, Model.TipoContactoList)</td>
                                                <td>@Edit.Text(@Model.ContactCandidatoViewModel[x].ValorContacto, nameValor, htmlClass: "form-control")</td>
                                                <td>
                                                    <a id="btnDelete"> @Display.GlyphiconButton("glyphicon-trash icon action")</a>
                                                </td>
                                            </tr>
                                                }
                                            }
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="form-group col-lg-4">
                            <div class="row" style="margin-top:15px;margin-bottom:5px;">
                                <div class="col-lg-12">
                                    <div class="col-lg-8 title-form removePadding">
                                        <label>@Resources.HTML_Candidatos_Create_ConocimientosTecnologicos</label>
                                    </div>
                                    <div class="col-lg-4 removePadding" style="text-align:right;">
                                        <button type="button" class="btn btn-default" id="btncreateExperiencia">
                                            <span class="text">@Resources.HTML_BotonGenerico_Aniadir</span>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div class="row form-row">
                                <div class="col-lg-12">
                                    <table id="listSubmitExp" data-id="listSubmit">
                                        <thead>
                                            <tr role="row">
                                                <th>@Resources.HTML_Candidatos_Edit_TipoTecnologiaHeader</th>
                                                <th>@Resources.HTML_Candidatos_Edit_NivelExperienciaHeader</th>
                                                <th>@Resources.HTML_Candidatos_Edit_ExperienciaPtsHeader</th>
                                                <th></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr role="row" class="hidden" id="templateExperiencia">
                                                <td class="hidden">@Edit.Hidden(0, "ExpCandidatoViewModel[{0}].CandidatoId")</td>
                                                <td class="hidden">@Edit.Hidden(0, "ExpCandidatoViewModel[{0}].CandidatoExperienciaId")</td>
                                                <td>@Edit.DropDownExtend((String)null, "ExpCandidatoViewModel[{0}].TipoTecnologiaId", Model.TipoTecnologiaList, validate: true, multiple: false, htmlClass: "form-control", showEmptyOption: true, required: true, disabled: true)</td>
                                                <td>@Edit.DropDownExtend((String)null, "ExpCandidatoViewModel[{0}].NivelTecnologiaId", Model.NivelExpList, validate: true, multiple: false, htmlClass: "form-control", showEmptyOption: true, required: true, disabled: true)</td>
                                                <td>@Edit.DropDownExtend((String)null, "ExpCandidatoViewModel[{0}].Experiencia", Model.ExperienciaList, validate: true, multiple: false, htmlClass: "form-control", showEmptyOption: true, required: true, disabled: true)</td>
                                                <td>
                                                    <a id="btnDelete"> @Display.GlyphiconButton("glyphicon-trash icon action")</a>
                                                </td>
                                            </tr>
                                            @{
                                                for (int x = 0; x < Model.ExpCandidatoViewModel.Count; x++)
                                                {
                                                    var candId = "ExpCandidatoViewModel[{0}].CandidatoId";
                                                    var nameId = "ExpCandidatoViewModel[{0}].CandidatoExperienciaId";
                                                    var nameTipo = "ExpCandidatoViewModel[{0}].TipoTecnologiaId";
                                                    var nameNivel = "ExpCandidatoViewModel[{0}].NivelTecnologiaId";
                                                    var nameExp = "ExpCandidatoViewModel[{0}].Experiencia";

                                                    <tr role="row" class="odd">
                                                        <td class="hidden">@Edit.Hidden(@Model.ExpCandidatoViewModel[x].CandidatoId, candId)</td>
                                                        <td class="hidden">@Edit.Hidden(@Model.ExpCandidatoViewModel[x].CandidatoExperienciaId, nameId)</td>
                                                        <td>@Edit.DropDownExtend(Model.ExpCandidatoViewModel[x].TipoTecnologiaId.ToString(), nameTipo, Model.TipoTecnologiaList, validate: true, multiple: false, htmlClass: "form-control", showEmptyOption: true, required: true, disabled: false)</td>
                                                        <td>@Edit.DropDownExtend(Model.ExpCandidatoViewModel[x].NivelTecnologiaId, nameNivel, Model.NivelExpList, validate: true, multiple: false, htmlClass: "form-control", showEmptyOption: true, required: true, disabled: false)</td>
                                                        <td>@Edit.DropDownExtend(@Model.ExpCandidatoViewModel[x].Experiencia, nameExp, Model.ExperienciaList, validate: true, multiple: false, htmlClass: "form-control", showEmptyOption: true, required: true, disabled: false)</td>
                                                        <td>
                                                            <a id="btnDelete"> @Display.GlyphiconButton("glyphicon-trash icon action")</a>
                                                        </td>
                                                    </tr>
                                                }
                                            }
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="form-group col-lg-4">
                            <div class="row" style="margin-top:15px;margin-bottom:5px;">
                                <div class="col-lg-12">
                                    <div class="col-lg-8 title-form removePadding">
                                        <label>@Resources.HTML_Candidatos_Create_ConocimientosIdiomas</label>
                                    </div>
                                    <div class="col-lg-4 removePadding" style="text-align:right;">
                                        <button type="button" class="btn btn-default" id="btncreateIdioma">
                                            <span class="text">@Resources.HTML_BotonGenerico_Aniadir</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="row form-row" style="margin-bottom:30px;">
                                <div class="col-lg-12">
                                    <table id="listSubmitIdioma" data-id="listSubmit">
                                        <thead>
                                            <tr role="row">
                                                <th>@Resources.HTML_Candidatos_Edit_IdiomaHeader</th>
                                                <th>@Resources.HTML_Candidatos_Edit_NivelHeader</th>
                                                <th></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr role="row" class="hidden" id="templateContactos">
                                                <td class="hidden">@Edit.Hidden(0, "IdiomaCandidatoViewModel[{0}].CandidatoId")</td>
                                                <td class="hidden">@Edit.Hidden(0, "IdiomaCandidatoViewModel[{0}].CandidatoIdiomasId")</td>
                                                <td>@Edit.DropDownExtend((String)null, "IdiomaCandidatoViewModel[{0}].IdiomaId", Model.IdiomaList, validate: true, multiple: false, htmlClass: "form-control", showEmptyOption: true, required: true, disabled: true)</td>
                                                <td>@Edit.DropDownExtend((String)null, "IdiomaCandidatoViewModel[{0}].NivelIdiomaId", Model.NivelIdiomaList, validate: true, multiple: false, htmlClass: "form-control", showEmptyOption: true, required: true, disabled: true)</td>
                                                <td>
                                                    <a id="btnDelete"> @Display.GlyphiconButton("glyphicon-trash icon action")</a>
                                                </td>
                                            </tr>
                                            @{
                                                for (int x = 0; x < Model.IdiomaCandidatoViewModel.Count; x++)
                                                {
                                                    var candId = "IdiomaCandidatoViewModel[{0}].CandidatoId";
                                                    var nameId = "IdiomaCandidatoViewModel[{0}].CandidatoIdiomasId";
                                                    var nameIdioma = "IdiomaCandidatoViewModel[{0}].IdiomaId";
                                                    var nameNivelIdioma = "IdiomaCandidatoViewModel[{0}].NivelIdiomaId";


                                            <tr role="row" class="odd">
                                                <td class="hidden">@Edit.Hidden(@Model.IdiomaCandidatoViewModel[x].CandidatoId, candId)</td>
                                                <td class="hidden">@Edit.Hidden(@Model.IdiomaCandidatoViewModel[x].CandidatoIdiomasId, nameId)</td>
                                                <td>@Edit.DropDownExtend(Model.IdiomaCandidatoViewModel[x].IdiomaId, nameIdioma, Model.IdiomaList, validate: true, multiple: false, htmlClass: "form-control", showEmptyOption: true, required: true, disabled: false)</td>
                                                <td>@Edit.DropDownExtend(Model.IdiomaCandidatoViewModel[x].NivelIdiomaId, nameNivelIdioma, Model.NivelIdiomaList, validate: true, multiple: false, htmlClass: "form-control", showEmptyOption: true, required: true, disabled: false)</td>
                                                <td>
                                                    <a id="btnDelete"> @Display.GlyphiconButton("glyphicon-trash icon action")</a>
                                                </td>
                                            </tr>
                                                }
                                            }
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div> <!-- End form-filter  -->
    </div> <!-- End content-box-content -->
</div> <!-- End .content-box -->
@Html.Partial("~/Views/Candidatos/Modals/_ModalBusquedaCentro.cshtml")
@Html.Partial("~/Views/Candidatos/Modals/_ModalCrearEditCentros.cshtml")

@section scripts{

    @CandidatosFrontActions.MenuFrontActions()
    @CandidatosFrontActions.ComprobacionesComunesFrontActions(Url)
    @CandidatosFrontActions.ForTable()
    @CandidatosFrontActions.CreateEditFrontActions()

}
